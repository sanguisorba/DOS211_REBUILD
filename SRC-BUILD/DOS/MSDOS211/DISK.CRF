:ODISK - Disk utility routines                                CONSTANTSCONSTANTSCONSTCONSTANTSDATADATADATADATACODECODECODECODELASTLASTLASTLASTDOSGROUPCODECONSTANTSDATALASTCODECODECODEDOSGROUPDOSGROUPI_NEEDDATADATADATACOUTDSAVCOUTDSAVDATAI_NEEDDATADATADATACOUTSAVCOUTSAVDATAI_NEEDDATADATADATACINDSAVCINDSAVDATAI_NEEDDATADATADATACINSAVCINSAVDATAI_NEEDDATADATADATACONSWAPCONSWAPDATAI_NEEDDATADATADATAIDLEINTIDLEINTDATAI_NEEDDATADATADATATHISFCBTHISFCBDATAI_NEEDDATADATADATADMAADDDMAADDDATAI_NEEDDATADATADATADEVCALLDEVCALLDATAI_NEEDDATADATADATACALLSCNTCALLSCNTDATAI_NEEDDATADATADATACALLXADCALLXADDATAI_NEEDDATADATADATACONTPOSCONTPOSDATAI_NEEDDATADATADATANEXTADDNEXTADDDATAI_NEEDDATADATADATACONBUFCONBUFDATAI_NEEDDATADATADATAUSER_SSUSER_SSDATAI_NEEDDATADATADATAUSER_SPUSER_SPDATAI_NEEDDATADATADATADSKSTACKDSKSTACKDATAI_NEEDDATADATADATAINDOSINDOSDATAI_NEEDDATADATADATANUMIONUMIODATAI_NEEDDATADATADATACURDRVCURDRVDATAI_NEEDDATADATADATATHISDRVTHISDRVDATAI_NEEDDATADATADATACLUSFACCLUSFACDATAI_NEEDDATADATADATASECCLUSPOSSECCLUSPOSDATAI_NEEDDATADATADATADIRSECDIRSECDATAI_NEEDDATADATADATACLUSNUMCLUSNUMDATAI_NEEDDATADATADATANXTCLUSNUMNXTCLUSNUMDATAI_NEEDDATADATADATAREADOPREADOPDATAI_NEEDDATADATADATADSKERRDSKERRDATAI_NEEDDATADATADATARECCNTRECCNTDATAI_NEEDDATADATADATARECPOSRECPOSDATAI_NEEDDATADATADATATRANSTRANSDATAI_NEEDDATADATADATABYTPOSBYTPOSDATAI_NEEDDATADATADATASECPOSSECPOSDATAI_NEEDDATADATADATABYTSECPOSBYTSECPOSDATAI_NEEDDATADATADATABYTCNT1BYTCNT1DATAI_NEEDDATADATADATABYTCNT2BYTCNT2DATAI_NEEDDATADATADATASECCNTSECCNTDATAI_NEEDDATADATADATATHISDPBTHISDPBDATAI_NEEDDATADATADATALASTPOSLASTPOSDATAI_NEEDDATADATADATAVALSECVALSECDATAI_NEEDDATADATADATAGROWCNTGROWCNTDATAPROCEDURESWAPBACKSWAPBACKSWAPBACKDOSGROUPINVOKEGET_SF_FROM_JFNSF_FCBCOUTDSAVCOUTSAVFCB_FIRCLUSFCB_FIRCLUSFCB_DEVIDDOSGROUPINVOKEGET_SF_FROM_JFNSF_FCBCINDSAVCINSAVFCB_FIRCLUSFCB_FIRCLUSFCB_DEVIDDOSGROUPCONSWAPIDLEINTSWAPRETSWAPRETRETURNPROCEDURESWAPCONSWAPCONSWAPCONDOSGROUPCONSWAPIDLEINTINVOKEGET_SF_FROM_JFNSF_FCBFCB_DEVIDCINDSAVFCB_FIRCLUSCINSAVCINSAVTHISFCBFCB_DEVIDFCB_FIRCLUSFCB_DEVIDFCB_FIRCLUSFCB_FIRCLUSDOSGROUPINVOKEGET_SF_FROM_JFNSF_FCBFCB_DEVIDCOUTDSAVFCB_FIRCLUSCOUTSAVCOUTSAVTHISFCBFCB_DEVIDFCB_FIRCLUSFCB_DEVIDFCB_FIRCLUSFCB_FIRCLUSSWAPRETPROCEDURELOADLOADLOADSETUPDOSGROUPREADDEVDISKREADRETURNREADDEVREADDEVDOSGROUPDMAADDENDRDDEVJ3ISNULLTESTRAWENDRDDEVJ3ENDRDDEVJ3ENDRDDEVJ2DVRDRAWDVRDRAWDOSGROUPDVRDRAWRDVRDRAWRINVOKESETREADTHISFCBINVOKEDEVIOCALLDEVCALLREQSTATSTERRCRDROKINVOKECHARHARDDVRDRAWRCRDROKCRDROKCALLSCNTENDRDDEVJ2TESTRAWTESTRAWDVRDRAWISCINNOTRDCONREADCONNOTRDCONNOTRDCONINVOKESETREADTHISFCBFCB_FIRCLUSDVRDLPDVRDLPINVOKEDSKSTATCHKINVOKEDEVIOCALL2DEVCALLREQSTATSTERRCRDOKINVOKECHARHARDCALLSCNTDVRDLPDVRDIGNCRDOKCRDOKCALLSCNTENDRDDEVJ2CALLXADDVRDIGNDVRDIGNCALLXADDEVCALLREQSTATENDRDDEVJC_CRDVRDLPENDRDDEVJENDRDDEVJENDRDDEVJ2ENDRDDEVJ2ENDRDDEVTRANBUFTRANBUFC_CRNORMCHC_LFNORMCHNORMCHC_LFTRANBUFENDRDCONINVOKEOUTENDRDCONENDRDCONDOSGROUPSWAPBACKCONTPOSENDRDDEVENDRDDEVDOSGROUPNEXTADDSETFCBCTHISFCBFCB_DEVIDSETFCBCSETFCBCSETFCBRETURNREADCONREADCONDOSGROUPSWAPCONCONTPOSTRANBUFCONBUFGETBUFCONBUFGETBUFGETBUFDOSGROUPCONBUFINVOKE$STD_CON_STRING_INPUTDOSGROUPCONBUFTRANBUFINVOKEOUTENDRDCONPROCEDURESTORESTORESTORESETUPDOSGROUPWRTDEVINVOKEDATE16FCB_FDATEFCB_FTIMEDISKWRITERETURNWRITECONWRITECONDOSGROUPSWAPCONWRCONLPWRCONLPCONEOFINVOKEOUTWRCONLPCONEOFCONEOFDOSGROUPSWAPBACKENDWRDEVDVWRTRAWDVWRTRAWINVOKESETWRITETHISFCBINVOKEDEVIOCALLDEVCALLREQSTATSTERRCWRTROKINVOKECHARHARDDVWRTRAWCWRTROKCWRTROKDOSGROUPCALLSCNTENDWRDEVENDWRDEVTHISFCBFCB_RECSIZADDRECRETURNDOSGROUPWRTDEVWRTDEVENDWRDEVDMAADDDVWRTRAWISCOUTWRITECONISNULLWRTNULWRTCOOKDONEINVOKESETWRITETHISFCBFCB_FIRCLUSDVWRTLPDVWRTLPINVOKEDSKSTATCHKINVOKEDEVIOCALL2DEVCALLREQSTATSTERRCWROKINVOKECHARHARDCALLSCNTDVWRTLPDVWRTIGNCWROKCWROKCALLSCNTWRTCOOKDONEDVWRTIGNDVWRTIGNCALLXADCALLXADWRTCOOKDONEDEVCALLREQSTATDVWRTLPWRTCOOKDONEWRTCOOKDONEENDWRDEVWRTNULWRTNULWRTCOOKDONEPROCEDUREGET_IO_FCBGET_IO_FCBGET_IO_FCBDOSGROUPINVOKEGET_SF_FROM_JFNRET44PSF_FCBRET44PRET44PRETURNPROCEDUREGETTHISDRVGETTHISDRVGETTHISDRVNUMIORETCRET_LRET_LRET_L??0006??0006RET_LRET_CRET_C??0006RET_CRET_CRET_CPHYDRVCURDRVPHYDRVPHYDRVTHISDRVRETURNPROCEDUREDIRREADDIRREADDIRREADDOSGROUPCLUSFACSECCLUSPOSDIRSECCLUSNUMNXTCLUSNUMFIRSTCLUSTERSKPCLLPSKPCLLPINVOKEUNPACKHAVESKIPPEDSKPCLLPHAVESKIPPEDHAVESKIPPEDNXTCLUSNUMINVOKEFIGRECENTRYFIRSTCLUSTERFIRSTCLUSTERFIRSTCLUSTERDIRPRIINVOKEGETBUFFRPROCEDUREFATSECRDFATSECRDFATSECRDDPB_FAT_COUNTDPB_FAT_SIZENXTFATNXTFATDSKREADRET41PNXTFATENTRYDREADDREADDREADDSKREADRETZRET_LRET_LRET_L??0009??0009RET_LRET_ZRET_Z??0009RET_ZRET_ZRET_ZREADOPINVOKEHARDERRDREADRETURNRET41PRET41PRETURNPROCEDUREDSKREADDSKREADDSKREADDPB_MEDIADPB_UNITINVOKESETREADDODSKOPENTRYDWRITEDWRITEDWRITEDSKWRITERETZRET_LRET_LRET_L??000D??000DRET_LRET_ZRET_Z??000DRET_ZRET_ZRET_ZREADOPINVOKEHARDERRDWRITERETURNENTRYDSKWRITEDSKWRITEDSKWRITEDPB_MEDIADPB_UNITINVOKESETWRITEDODSKOPDODSKOPDPB_DRIVER_ADDRINVOKEDEVIOCALL2CALLSCNTDEVCALLREQSTATSTERRRETURNDOSGROUPPROCEDURESETUPSETUPSETUPTHISDRVFCB_DEVIDFCB_RECSIZHAVRECSIZFCB_RECSIZHAVRECSIZHAVRECSIZTHISFCBDOSGROUPTHISFCBNOTDEVICENOTDEVICENOTDEVICEINVOKEGETBPCHECKRECLENDSKERRRETURNCHECKRECLENCHECKRECLENSMALRECSMALRECSMALRECRECCNTRECPOSRECPOSDMAADDNEXTADDDSKERRTRANSBYTPOSEOFERRBYTPOSBYTPOSDPB_SECTOR_SIZEEOFERRSECPOSBYTSECPOSDPB_CLUSTER_MASKSECCLUSPOSDPB_CLUSTER_SHIFTCLUSNUMDMAADDOKDMAADDPARTSEGPARTSEGPARTSEGRECCNTDSKERRNOROOMOKOKTHISFCBFCB_DEVIDRETURNEOFERREOFERRDSKERRNOROOMNOROOMTHISFCBRETURNPROCEDUREBREAKDOWNBREAKDOWNBREAKDOWNDOSGROUPBYTSECPOSSAVFIRDPB_SECTOR_SIZESAVFIRSAVFIRSAVFIRBYTCNT1DPB_SECTOR_SIZESECCNTBYTCNT2BYTCNT1RETNZRET_LRET_LRET_L??0014??0014RET_LRET_NZRET_NZ??0014RET_NZRET_NZRET_NZRETNZRET_LRET_LRET_L??0016??0016RET_LRET_NZRET_NZ??0016RET_NZRET_NZRET_NZDPB_SECTOR_SIZEBYTCNT2SECCNTRETURNPROCEDUREDISKREADDISKREADDISKREADDOSGROUPFCB_FILSIZFCB_FILSIZBYTPOSBYTPOSRDERRENUFRDERRENUFENUFENUFTHISDPBBREAKDOWNCLUSNUMINVOKEFNDCLUSSKIPERRRDERRRDERRWRTERRRDLASTJRDLASTJRDLASTSETFCBJ2SETFCBJ2SETFCBSKIPERRSKIPERRLASTPOSCLUSNUMBYTCNT1RDMIDINVOKEBUFRDRDMIDRDMIDSECCNTRDLASTJINVOKENEXTSECSETFCBJ2TRANSONSECONSECSECCLUSPOSSECCNTCLUSNUMRDLPRDLPINVOKEOPTIMIZEDMAADDDREADDPB_DRIVEINVOKESETVISITNXTBUFNXTBUFVISITBUFDRVDONXTBUFBUFSECNODONXTBUFBUFSECNODONXTBUFBUFDIRTYCLBUFFBUFSECNODPB_SECTOR_SIZEBUFINSIZDMAADDEVENMOVEVENMOVEVENMOVDPB_DRIVECLBUFFCLBUFFINVOKESCANPLACEDONXTBUFDONXTBUFINVOKESKIPVISITNXTBUFDOSGROUPRDLASTSETFCBLASTPOSRDLPRDLASTRDLASTBYTCNT2SETFCBBYTCNT1INVOKENEXTSECSETFCBBYTSECPOSINVOKEBUFRDENTRYSETFCBSETFCBSETFCBTHISFCBNEXTADDDMAADDFCB_RECSIZRECCNTFULLRECDSKERRFULLRECDSKERRDMAADDEVENFILEVENFILEVENFILFULLRECFULLRECSETCLUSSETCLUSFCB_DEVIDADDRECCLUSNUMFCB_LSTCLUSFCB_LSTCLUSLASTPOSFCB_CLUSPOSENTRYADDRECADDRECADDRECRECPOSRECPOSRET28RET28RET28RETURNPROCEDUREDISKWRITEDISKWRITEDISKWRITEDOSGROUPFCB_DEVIDTHISDPBBREAKDOWNBYTPOSBYTPOSWRTEOFJDPB_SECTOR_SIZECALCLUSCALCLUSCALCLUSDPB_CLUSTER_SHIFTTHISFCBFCB_FILSIZFCB_FILSIZDPB_SECTOR_SIZENORNDUPNORNDUPNORNDUPVALSECGROWCNTGROWCNTNOGROWTESTTAILDPB_SECTOR_SIZESETGRWHAVSTARTHAVSTARTINVOKESKPCLPDOWRTJINVOKEALLOCATEDOWRTJWRTERRWRTERRDSKERRRECPOSRECPOSTHISFCBRETURNDOWRTJDOWRTJDOWRTWRTEOFJWRTEOFJWRTEOFTESTTAILTESTTAILNOGROWSETGRWSETGRWGROWCNTGROWCNTNOGROWNOGROWCLUSNUMINVOKEFNDCLUSCLUSNUMLASTPOSDOWRTHAVSTARTINVOKEALLOCATEWRTERRLASTPOSNOSKIPINVOKESKPCLPNOSKIPNOSKIPCLUSNUMLASTPOSDOWRTDOWRTBYTCNT1WRTMIDCLUSNUMINVOKEBUFWRTWRTMIDWRTMIDSECCNTWRTLASTSECPOSINVOKENEXTSECTRANSSECCLUSPOSCLUSNUMSECCNTWRTLPWRTLPINVOKEOPTIMIZEDPB_DRIVEINVOKESETVISITNEXTBUFFNEXTBUFFVISITBUFDRVDONEXTBUFFBUFSECNODONEXTBUFFBUFSECNODONEXTBUFFBUFDRVINVOKESCANPLACEDONEXTBUFFDONEXTBUFFINVOKESKIPVISITNEXTBUFFDMAADDDWRITEDOSGROUPWRTLASTLASTPOSWRTLPWRTERRJWRTERRJWRTERRWRTLASTWRTLASTBYTCNT2FINWRTBYTCNT1INVOKENEXTSECBYTSECPOSINVOKEBUFWRTFINWRTFINWRTTHISFCBGROWCNTGROWCNTUPDATE_SIZESAMSIZUPDATE_SIZEUPDATE_SIZEFCB_FILSIZFCB_FILSIZSAMSIZSAMSIZRECCNTSETCLUSWRTEOFWRTEOFKILLFILDPB_SECTOR_SIZEDPB_CLUSTER_SHIFTINVOKEFNDCLUSRELFILEINVOKEALLOCATEWRTERRJUPDATEUPDATETHISFCBBYTPOSFCB_FILSIZBYTPOSFCB_FILSIZADDRECRELFILERELFILEINVOKERELBLKSUPDATEKILLFILKILLFILTHISFCBFCB_CLUSPOSFCB_FIRCLUSFCB_LSTCLUSUPDATEINVOKERELEASEUPDATEDO_EXTCODE